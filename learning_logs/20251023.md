# Login Process ì§„í–‰

# REST API í˜¸ì¶œ
í˜„ì¬ ìƒí™©ì—ì„œ ë¡œê·¸ì¸ì„ ì„±ê³µí•œë‹¤ê³  í•˜ë”ë¼ë„ jwtë¥¼ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í–ˆì„ ë¿ì´ê³ , ì•„ì§ getCars()ì˜ ê²°ê³¼ê°’ì„ ê°€ì ¸ì˜¤ì§€ëŠ” ëª»í•©ë‹ˆë‹¤.

ì´ ì´ìœ ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Login ì»´í¬ë„ŒíŠ¸ì—ì„œ ì–»ì€ í† í°ì„ ê°€ì§€ë¡œ frontendìƒì—ì„œ Carlistë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í•˜ê³  ìˆëŠ” ìƒí™©ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

carapi.tsì— getCars() í˜¸ì¶œì„ í• ë•Œ ì–»ì–´ì˜¨ jwtë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ê·¼ë° jwtToken ê°’ì´ ìƒê°í•´ë³´ë©´ .then()ì— ê±¸ë ¤ìˆê¸° ë•Œë¬¸ì— ì¼ì¢…ì˜ ì§€ì—­ë³€ìˆ˜ë¼ê³  ìƒê°í•˜ë©´ë¨


```tsx
import axios from "axios";
import { CarResponse, Car, CarEntity } from "../types";

export const getCars = async (): Promise<CarResponse[]> => {
    const token = sessionStorage.getItem('jwt');

    // ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ ìƒì— 'Bearer ' ê°€ í¬í•¨ë˜ì–´ìˆìŠµë‹ˆë‹¤. ê·¼ë° ì €í¬ê°€ postman ìƒì—ì„œ ìš”ì²­ì„ ë‚ ë¦´ë•Œ 'Bearer ' ë¶€ë¶„ì„ ë¹¼ë†“ê³  ë¶™ì—¬ë„£ê¸° í–ˆì—ˆë˜ ê²ƒì„ ë– ì˜¬ë ¤ì„œ 
    // í”„ë¡ íŠ¸ ì—”ë“œ ìƒì—ì„œ 'Bearer' ë¥¼ ì œê±°í•˜ê³ , ê·¸ê±¸ ê¸°ì¤€ìœ¼ë¡œ ìš”ì²­ì„ ë‚ ë ¸ìŠµë‹ˆë‹¤.
    const rawToken = token?.replace('Bearer ', '');

    const response = await axios.get(`${import.meta.env.VITE_API_URL}/api/cars`, {
        headers: { 'Authorization': `${rawToken}` }
    });

    return response.data._embedded.cars;
}

export const deleteCar = async (link: string) : Promise<CarResponse> => {
    const token = sessionStorage.getItem('jwt')?.replace('Bearer ', '');
    const response = await axios.delete(link);
    return response.data
}

export const addCar = async (car: Car) : Promise<CarResponse> => {
    const token = sessionStorage.getItem('jwt');
    const rawToken = token?.replace('Bearer ', '');
    const response = await axios.post(`${import.meta.env.VITE_API_URL}/api/cars`, car, {
        headers: {
            'Content-Type': 'application/json',
            'Authorization': rawToken
        },
    });

    return response.data;
}

export const updateCar = async (carEntity: CarEntity): Promise<CarResponse> => {
    const token = sessionStorage.getItem('jwt');
    const rawToken = token?.replace('Bearer ', '');
    const response = await axios.put(carEntity.url, carEntity.car, {
        headers: {
            'Content-Type': 'application/json',
            'Authorization': rawToken
        },
    });
    return response.data;
}
```
ì´ìƒì€ refactoring ì „ ë¶€ë¶„ì…ë‹ˆë‹¤. ìœ„ì— ë§í–ˆë˜ ê²ƒì²˜ëŸ¼ tokenì„ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë¶ˆëŸ¬ì˜¤ê³ , ì—¬ê¸°ì„œ Bearer ì ‘ë‘ì‚¬ë¥¼
ì œê±°í•˜ëŠ” ë¶€ë¶„, ê·¸ë¦¬ê³  header ë‚´ì— 'authorizetion' : token ë¶€ë¶„ì´ ì¤‘ë³µë˜ê³  ìˆë‹¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ë¶€ë¶„ì—ì„œ ì•Œì•„ì•¼í•  ì ì€ Scope ê°œë…ì´ ë˜ê² ë„¤ìš”. ê° í•¨ìˆ˜ì˜ ë‚´ë¶€ì—ì„œ tokenì„ ì„ ì–¸í•˜ê³  Bear ì ‘ë‘ì‚¬ë¥¼ ì œê±°í•˜ê³  ìˆê¸° ë•Œë¬¸ì— í•¨ìˆ˜ë§ˆë‹¤ ì„ ì–¸ ë° ì´ˆê¸°í™”ë¥¼ í•˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.

## ì¤‘ë³µ ì½”ë“œ ë¦¬í™í† ë§

ì´ìƒì—ì„œ ê³ ë ¤í•  ì ì€ getAxiosConfigì˜ return íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©ëœ AxiosRequestConfigì…ë‹ˆë‹¤.

- AxiosRequestConfig: Axios ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ HTTP ìš”ì²­ì„ ë§Œë“¤ë•Œ ì‚¬ìš©ë˜ëŠ” êµ¬ì„± ê°ì²´ íƒ€ì… ì •ì˜ì— í•´ë‹¹í•©ë‹ˆë‹¤. ì¦‰, Axiosë¥¼ ê²½ìœ í•˜ì—¬ ìš”ì²­ì„ ë³´ë‚´ê¸°
ìœ„í•´ í•„ìš”í•œ _ëª¨ë“  ì˜µì…˜_ ì„ ë‹´ëŠ” ì¼ì¢…ì˜ interfaceì— í•´ë‹¹í•©ë‹ˆë‹¤.

- ì €í¬ëŠ” axios.post(), .get ...ê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ëŠ” ì¢€ ë” ê°€ë…ì„±ì„ ë†’ì´ê¸° ìœ„í•œ ë°©ì‹ìœ¼ë¡œ 


## Authentication ì‹¤íŒ¨ì‹œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ í† ìŠ¤íŠ¸ ë©”ì‹œì§€ë¡œ ì‘ìš©í•˜ê² ìŠµë‹ˆë‹¤.

```tsx
<Snackbar 
  open={open}
  autoHideDuration={3000}
  onClose={() => setOpen(false)}
  message='ID í˜¹ì€ ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.ğŸš“'
/>

```

ë¼ê³  ì„¤ì •ì„ í–ˆë‹¤ê³  ê°€ì •í–ˆì„ ë•Œ, ìš°ë¦¬ëŠ” setOpen(true)ë¥¼ í˜¸ì¶œí•˜ëŠ” ë¶€ë¶„ì´ í•„ìš”í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.
Login ì»´í¬ë„ŒíŠ¸ ì¤‘ ì–´ë–¤ ë™ì‘ì„ í–ˆì„ë•Œ toast messageê°€ ì¶œë ¥ë˜ì–´ì•¼í•˜ë©°ã…‘, ê·¸ë˜ì„œ setOpen(true)
ì½”ë“œë¥¼ ì‚½ì…í•´ì•¼ í•˜ëŠ” ë¶€ë¶„ì€ ì–´ë”œê¹Œìš” 

